[
["index.html", "R语言笔记 简介", " R语言笔记 云腾足下 2020年5月 简介 十步杀一人，千里不留行 事了拂衣去，不留功与名 "],
["PanelData.html", "1 面板数据 1.1 一句话Tips 1.2 plm包 1.3 动态面板阈值估计：R语言中有一个包dtp，其估计函数为：", " 1 面板数据 1.1 一句话Tips PSTR:面板平滑转移模型。 MSCMT:多个结果变量的合成控制方法的包。 检查面板数据是否平衡：使用table(PanelData[,1:2])或者is.banance。 phtt包，交互效应的面板模型，用的Bai (2009)的估计方法。It offers the possibility of analyzing panel data with large dimensions n and T and can be considered when the unobserved heterogeneity effects are time-varying. 1.2 plm包 包中的vcovG函数可以计算聚类标准误。一般这么用: summary(plm, vcov = vcovG(plm, cluster = &#39;group&#39;, inner = &#39;cluster&#39;)) 包中的fixef函数可以返回个体截距项(type = level)。 updata(object, formula)函数可以更新公式重新估计。 1.3 动态面板阈值估计：R语言中有一个包dtp，其估计函数为： data(Mena) reg&lt;-dtp(GDPPC ~ FDI+OPEN|INF|INF,Mena,index=c(&quot;pays&quot;,&quot;ann&quot;),4,2,0.95,0.8,1,graph = TRUE) summary(reg) 注意： - 第一根|前的变量是不依赖区制的变量，中间由|夹住的变量是阈值变量，最后一个|后面的变量是依赖区制的变量（好遗憾，貌似只允许一个这样的变量）。 - initnum参数指的是模型中的内生变量。在动态面板中，一般是因变量的滞后值，因此在数据框中滞后因变量，然后选好该滞后因变量所在列的数字即可。注意，这个数字是在剔除了id和year标识之后的列的序号。 - 数据上千以后，估计过程有点慢，耐心等待。 - 输出中包含一个gamma参数，我揣摩是截距项。 "],
["TS.html", "2 普通回归和时间序列序列 2.1 一句话Tips 2.2 GMM估计 2.3 季节调整", " 2 普通回归和时间序列序列 2.1 一句话Tips confint函数返回系数的置信区间 bssm拟合非线性卡尔曼滤波的包。pomp，KFAS也是。pomp好像接口更简单些，第四节有一个非线性的例子。 NlinTS一个利用神经网络的格兰杰因果非线性检验。 slider: 在任何R数据类型上提供类型稳定的滚动窗口函数，并支持累积窗口和扩展窗口。 testcorr: 提供计算单变量时间序列中自相关显著性、双变量时间序列中互相关显著性、多变量序列中皮尔逊相关显著性和单变量序列i.i.d.特性的测试统计量的功能。 apt一个阈值协整包。 fDMA动态平均模型。卡尔曼滤波的贝叶斯模型平均。 MuMIn利用信息准则进行模型平均的包。 MSBVAR提供了贝叶斯框架下的马尔科夫转移VAR。MSwM是一个单方程（非单变量）的马尔科夫转移模型估计。 因子变虚拟变量：model.matrix可以生成回归所需要的矩阵，可以把因子变量变成虚拟变量。 mfGARCH包估计混频GARCH。 TED::ur.za.fast和urca::ur.za未知断点的单位根检验。 mFilter包有各种经济和金融常用的滤波，如HP，BK等滤波（好像没有更新了，官网包的镜像没有找到）。但是可以使用FRAPO包的trdhp函数来计算HP滤波 。 svars是一个数据驱动的结构VAR包。vars是一个VAR各种估计和诊断的标准包。tsDyn也有线性VAR和VECM的估计，其中它还允许包含外生变量。 lmtest有grangertest()做双变量格兰杰因果检验。MTS::GrangerTest(regdata[,-c(1,2)],2,locInput = 1)也可以，而且可以做多个变量是不是某个变量的格兰杰原因。locInput表示因变量是第几列。 stats4包提供了函数mle可以进行极大似然估计，还可以固定部分参数，优化其他参数，这其实是集中似然的思想。关键是它还返回方差协方差矩阵。语法如下， mle(minuslogl, start = formals(minuslogl), method = &quot;BFGS&quot;, fixed = list(), nobs, ...) # 注意它的初值是一个list dynlm::dynlm包一个比lm更强大线性回归结构，优点有三： 可以使用差分、滞后等表述，如d(y)~L(y,2)，可以直接添加趋势项trend(y)将使用$(1:n)/Freq$作为回归元。 可以进行工具变量估计。 但要注意，他的数据不是数据框，而是一个ts对象。 nardl估计非线性协整分布滞后模型。 rugarch：单变量garch建模。一个比forcast更好用的时序建模包。可以用show函数来返回一个丰富的结果，包括一些检验结果。 rmgarch：多变量garch建模。包括dcc,adcc,gdcc等。 stats包中的ARMAtoMA函数可以计算AR变成MA。vars包的Phi返回VAR的移动平均系数。 vars包里面的Phi函数可以把VAR变成VMA。使用summary函数来摘要var的估计结果，会给粗特征根，残差相关矩阵等。 tsDyn包的VECM函数比较好用，可以包括外生变量，可以选择OLS或Joson方法。这个包也是可以估计线性VAR的，主要是他的lineVar函数。egcm包是恩格尔格兰杰协整检验，这个检验在urca包里业可行。 TSA::periodogram可以做谱分解。 bvarsv时变参数var建模 nls非线性最小二乘法函数 highfrequance里面有不少意思的函数，包括HAR。 ## 回归中关于公式的理解和构造 # 构造公式, 只要包含波浪线就意味着这是一个公式。 F1 &lt;- dist ~ speed - 1 # 获得公式中所有的变量 mf1 &lt;- model.frame(F1,data = cars) # 抽取因变量 model.response(mf1) # 抽取自变量 model.matrix(F1, data = cars) 公式的高级应用还有一个包Formula，其说明文件很到位。主要阐述了|的使用方式。 2.2 GMM估计 \\[ i _t =\\beta_0 + \\beta_1pi_t + \\beta_2GDP_t + \\beta_3hp_t + \\beta_4i_{t-1} + \\varepsilon_t \\] 因包含因变量的滞后项从而有内生性，欲使用\\(i_{t-2},i_{t-3},i_{t-4}\\)作为工具变量，从而做一个GMM估计，亦即整个方程的矩条件为， \\[\\begin{align} E(pi_t\\varepsilon_t) = 0\\\\ E(GDP_t\\varepsilon_t) = 0\\\\ E(hp_t\\varepsilon_t) = 0\\\\ E(i_{t-2}\\varepsilon_t) = 0\\\\ E(i_{t-3}\\varepsilon_t) = 0\\\\ E(i_{t-4}\\varepsilon_t) = 0 \\end{align}\\] 利用这些矩条件的GMM估计在gmm包中的写法为， gmmrlt &lt;- gmm(g = it ~ pi + gdp + hp + it1, x = ~ pi + gdp + hp + it2 + it3 + it4,data = dwg0) summary(gmmrlt) 其中g可直接写成公式，x即为工具变量集。 2.3 季节调整 2.3.1 R中有x12包可以做季节处理 注意： - 要先下载美国统计局的x12程序包，并在调用函数时，记得写上所以存储的路径。 - 仅可处理R中内置的时间序列对象ts。 - 示例代码： library(x12) data(AirPassengers) x12out &lt;- x12work(AirPassengers, x12path = &#39;C:\\\\ado\\\\plus\\\\WinX12\\\\x12a\\\\x12a.exe&#39;,keep_x12out = FALSE) x12out$d11 #此即为调整后的时间序列 其中，keep_x12out参数表示是否要保留计算后的文件。 2.3.2 seasonal包有x13处理，更加便捷 library(seasonal) m &lt;- seas(AirPassengers) # x13 处理 final(m) # 最终调整序列 plot(m) # 绘制调整和未调整序列 "],
["DataProcess.html", "3 数据处理", " 3 数据处理 dbplyr可以连接到几乎任何数据库。 wbstats下载世界银行数据，很牛逼。Stata里面的wbopendata包更牛逼。 stationaRy:一个从NOAA上下载气象数据，如气温，风向等的包。该包就三个函数，一个用来得到站点id，一个用这个id下载数据，还有一个是如果你想得到其他额外的气象数据时可能有用。 qs包可以快速读入与保存 tor: 提供允许用户同时导入多个文件的功能. 读入excel中的sheet名：openxlsx::getSheetNames(file) XLConect处理excel最强大的包。但需要JRE（java run enviornment）。 使用as.Date来生成日期，必须带有年月日三个要素，使用format来输出日期格式，此时可以只输出年和月。如as.Date('2010/05/01') %&gt;% format(.,format = '%Y%m') seq.Date()生成日期序列，包括日、星期、月、年。 readstata13包可以读入更高版本的stata数据格式。 zoo::rollapply(x, 30, mean)就是30天的移动平均求值。 select是一个很牛逼的函数 select(regdata,id, year) # 选择regdata数据框的id和year两列 select(regdata,starts_with(&#39;abc&#39;)) # 匹配以&#39;abc&#39;开头的列 select(regdata,ends_with(&#39;abc&#39;)) # 匹配以&#39;abc&#39;结尾的列 select(regdata,contains(&#39;abc&#39;)) # 匹配包含&#39;abc&#39;的列 select(regdata,matches(&#39;abc&#39;)) # 正则表达匹配 select(regdata,num_range(&#39;x&#39;,1:3)) # 匹配x1, x2,x3的列 R语言给数组各维数命名 # Create two vectors of different lengths. vector1 &lt;- c(5,9,3) vector2 &lt;- c(10,11,12,13,14,15) column.names &lt;- c(&quot;COL1&quot;,&quot;COL2&quot;,&quot;COL3&quot;) row.names &lt;- c(&quot;ROW1&quot;,&quot;ROW2&quot;,&quot;ROW3&quot;) matrix.names &lt;- c(&quot;Matrix1&quot;,&quot;Matrix2&quot;) # Take these vectors as input to the array. result &lt;- array(c(vector1,vector2),dim = c(3,3,2),dimnames = list(row.names,column.names, matrix.names)) print(result) ## , , Matrix1 ## ## COL1 COL2 COL3 ## ROW1 5 10 13 ## ROW2 9 11 14 ## ROW3 3 12 15 ## ## , , Matrix2 ## ## COL1 COL2 COL3 ## ROW1 5 10 13 ## ROW2 9 11 14 ## ROW3 3 12 15 pdftools包的函数可以读PDF文件： pdf_info(pdf, opw = &quot;&quot;, upw = &quot;&quot;) pdf_text(pdf, opw = &quot;&quot;, upw = &quot;&quot;) pdf_data(pdf, opw = &quot;&quot;, upw = &quot;&quot;) pdf_fonts(pdf, opw = &quot;&quot;, upw = &quot;&quot;) pdf_attachments(pdf, opw = &quot;&quot;, upw = &quot;&quot;) pdf_toc(pdf, opw = &quot;&quot;, upw = &quot;&quot;) pdf_pagesize(pdf, opw = &quot;&quot;, upw = &quot;&quot;) 同时，利用qpdf包的pdf_subset,pdf_combine,pdf_split可以提取PDF的部分内容，合并PDF文件，把每一页分成一个PDF文件。 "],
["references.html", "References", " References "]
]
