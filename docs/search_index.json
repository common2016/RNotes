[
["DataProcess.html", "3 数据处理 3.1 一句话Tips 3.2 RJSDMX包下载世界各大数据库数据", " 3 数据处理 3.1 一句话Tips 因子操作 # 使用字符串有两个缺陷：第一，不在因子水平范围内的不会转化成NA # 第二，仅按字母排序。 # 因此，通过设定因子水平，可以解决上述两个问题。注意水平和字符串是一样的， # 只是相当于设定了范围和排序。 factor(c(&#39;Dec&#39;,&#39;Apr&#39;,&#39;Jam&#39;,&#39;Mar&#39;), levels = (&#39;Jan&#39;,&#39;Feb&#39;,&#39;Mar&#39;,&#39;Apr&#39;,&#39;May&#39;)) # 因子重编码, 把1改成unmarried等 farcats::fct_recode(rawdata$marrige, &#39;unmarried&#39;=&#39;1&#39;,&#39;married&#39;=&#39;2&#39;,&#39;cohabitation&#39;=&#39;3&#39;,&#39;divore&#39;=&#39;4&#39;,&#39;wid&#39;=&#39;5&#39;) dbplyr可以连接到几乎任何数据库。 wbstats下载世界银行数据，很牛逼。Stata里面的wbopendata包更牛逼。 stationaRy:一个从NOAA上下载气象数据，如气温，风向等的包。该包就三个函数，一个用来得到站点id，一个用这个id下载数据，还有一个是如果你想得到其他额外的气象数据时可能有用。 当你发现你用save命令保存一个数据长达数分钟时，建议你迅速调用qs包，可能一分钟不到就帮你快速读入和保存了。但这个包一次只能保存一个变量。 tor: 提供允许用户同时导入多个文件的功能. 读入excel中的sheet名：openxlsx::getSheetNames(file) XLConect处理excel最强大的包。但需要JRE（java run enviornment）。 # 可以不改变原有数据，然后把一个数据框精准地写入某个地方 writeWorksheetToFile(&quot;XLConnectExample2.xlsx&quot;, data = ChickWeight, sheet = &quot;chickSheet&quot;, startRow = 3, startCol = 4,header = FALSE, clearSheets = FALSE) 使用as.Date来生成日期，必须带有年月日三个要素，使用format来输出日期格式，此时可以只输出年和月。如as.Date('2010/05/01') %&gt;% format(.,format = '%Y%m') seq.Date()生成日期序列，包括日、星期、月、年。 readstata13包可以读入更高版本的stata数据格式。 zoo::rollapply(x, 30, mean)就是30天的移动平均求值。 select是一个很牛逼的函数 select(regdata,id, year) # 选择regdata数据框的id和year两列 select(regdata,starts_with(&#39;abc&#39;)) # 匹配以&#39;abc&#39;开头的列 select(regdata,ends_with(&#39;abc&#39;)) # 匹配以&#39;abc&#39;结尾的列 select(regdata,contains(&#39;abc&#39;)) # 匹配包含&#39;abc&#39;的列 select(regdata,matches(&#39;abc&#39;)) # 正则表达匹配 select(regdata,num_range(&#39;x&#39;,1:3)) # 匹配x1, x2,x3的列 R语言给数组各维数命名 # Create two vectors of different lengths. vector1 &lt;- c(5,9,3) vector2 &lt;- c(10,11,12,13,14,15) column.names &lt;- c(&quot;COL1&quot;,&quot;COL2&quot;,&quot;COL3&quot;) row.names &lt;- c(&quot;ROW1&quot;,&quot;ROW2&quot;,&quot;ROW3&quot;) matrix.names &lt;- c(&quot;Matrix1&quot;,&quot;Matrix2&quot;) # Take these vectors as input to the array. result &lt;- array(c(vector1,vector2),dim = c(3,3,2),dimnames = list(row.names,column.names, matrix.names)) print(result) pdftools包的函数可以读PDF文件： pdf_info(pdf, opw = &quot;&quot;, upw = &quot;&quot;) pdf_text(pdf, opw = &quot;&quot;, upw = &quot;&quot;) pdf_data(pdf, opw = &quot;&quot;, upw = &quot;&quot;) pdf_fonts(pdf, opw = &quot;&quot;, upw = &quot;&quot;) pdf_attachments(pdf, opw = &quot;&quot;, upw = &quot;&quot;) pdf_toc(pdf, opw = &quot;&quot;, upw = &quot;&quot;) pdf_pagesize(pdf, opw = &quot;&quot;, upw = &quot;&quot;) 同时，利用qpdf包的pdf_subset,pdf_combine,pdf_split可以提取PDF的部分内容，合并PDF文件，把每一页分成一个PDF文件。 3.2 RJSDMX包下载世界各大数据库数据 一般工作流： library(RJSDMX) # 查看有哪些库可以用 getProviders() # 库中有哪些子库可以用 getFlows(&#39;WITS&#39;) # 该子库调取数据需要哪几个字段 getDimensions(&#39;WITS&#39;,&#39;WBG_WITS,DF_WITS_TradeStats_Tariff,1.0&#39;) # 查看这个指标有几个选项 getCodes(&#39;WITS&#39;,&#39;WBG_WITS,DF_WITS_TradeStats_Tariff,1.0&#39;,&#39;INDICATOR&#39;) # 查好了就可以下载 ans &lt;- getTimeSeries(&#39;WITS&#39;, &#39;DF_WITS_TradeStats_Tariff/A.CHN.WLD.01-05_Animal.MFN-WGHTD-AVRG&#39;) # 你也可以调用图形窗口查阅命令 sdmxHelp() "]
]
